document.addEventListener('DOMContentLoaded',function(){const searchTrigger=document.querySelector('.search__trigger')||null;const searchPanel=document.querySelector('.search__panel')||null;const searchClose=document.querySelector('.search__close')||null;const searchInput=document.querySelector('#dnn_dnnSearch_txtSearch')||null;const mainContent=document.querySelector('#dnn_content')||null;const userMenu=document.querySelector('.userMenu')||null;const userProperties=document.querySelector('.userProperties')||null;const loginToggle=document.querySelector('.login__toggle')||null;const closeProducts=document.querySelector('.submenu__close')||null;const submenuProducts=document.querySelector('.submenu__list--productos')||null;const menuToggle=document.querySelector('.megamenu__toggle')||null;const menuMobile=document.querySelector('.megamenu__list')||null;const linkTriggers=document.querySelectorAll('.link__trigger')||null;const topMenu=document.querySelector('#top-menu')||null;const internalMenu=document.querySelector('.InternalMenu')||null;const personaBar=document.querySelector('.personalBarContainer > iframe')||null;const registerButton=document.querySelector('#CustomRegisterLink')||null;registerButton?registerButton.setAttribute('href','/registro'):null;function closeSubMenu(){submenuProducts.style.visibility='hidden';submenuProducts.style.opacity='0';setTimeout(()=>{submenuProducts.removeAttribute('style');},1000);}
function searchBarTrigger(){if(userProperties.classList.contains('active')){userProperties.classList.remove('active');searchPanel.classList.toggle('active');mainContent&&mainContent.classList.toggle('blur');searchInput.focus();}else if(menuMobile.classList.contains('active')){menuMobile.classList.remove('active');searchPanel.classList.toggle('active');mainContent&&mainContent.classList.toggle('blur');searchInput.focus();if(menuToggle.classList.contains('active')){menuToggle.classList.remove('active');}}else{searchPanel.classList.toggle('active');mainContent&&mainContent.classList.toggle('blur');searchInput.focus();}}
function searchBarClose(){searchPanel.classList.remove('active');mainContent&&mainContent.classList.remove('blur');}
function showMegamenu(){menuToggle.classList.toggle('active');menuMobile.classList.toggle('active');if(userProperties.classList.contains('active')){userProperties.classList.remove('active');}}
searchTrigger&&searchTrigger.addEventListener('click',searchBarTrigger);searchClose&&searchClose.addEventListener('click',searchBarClose);closeProducts&&closeProducts.addEventListener('click',closeSubMenu);menuToggle&&menuToggle.addEventListener('click',showMegamenu);for(let linkIndex=0;linkIndex<linkTriggers.length;linkIndex+=1){const link=linkTriggers[linkIndex];link.addEventListener('click',function(event){linkTriggers.forEach(otherTriggers=>{if(!(link===otherTriggers)){otherTriggers.classList.contains('active')?otherTriggers.classList.remove('active'):null;otherTriggers.nextSibling.nextSibling.classList.contains('active')?otherTriggers.nextSibling.nextSibling.classList.remove('active'):null;}});link.classList.toggle('active');link.nextSibling.nextSibling.classList.toggle('active');});}
if(personaBar){const config={attributes:true,childList:true,firstElementChild:true,subtree:true,};const fixHeaderWidht=function(mutationsList,observer){for(const mutation of mutationsList){if(mutation.type==='childList'){}else if(mutation.type==='attributes'){if(mutation.attributeName==='style'){topMenu.style.width='calc(100% - 80px)';adminObserver.disconnect();}}}};const adminObserver=new MutationObserver(fixHeaderWidht);adminObserver.observe(personaBar,config);}
loginToggle.addEventListener('click',function(){if(searchPanel.classList.contains('active')){userProperties.classList.toggle('active');searchPanel.classList.toggle('active');mainContent&&mainContent.classList.toggle('blur');}else{userProperties.classList.toggle('active');}});if(document.querySelector('.userNickname')){const userNickname=document.querySelector('.userNickname');userNickname.addEventListener('click',function(){userMenu.classList.toggle('active');userNickname.classList.toggle('active');});}else{return null;}});